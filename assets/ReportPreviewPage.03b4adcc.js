import{r as l,aa as $,ab as j,j as n,B as o,a as e,H as O,T as V,ac as q,ad as C,ae as S,af as T,ag as z,ah as H,ai as L,aj as U,ak as W,b as k,al as _,am as N,an as G,I as J,M as K}from"./index.c09ed305.js";import{i as Q,T as X,a as Y,b as Z,c as m,d as ee,e as te,f as A,r as re}from"./data.c45b6d27.js";import{M as I,a as v,b as w,c as h}from"./index.esm.965edf9a.js";function le(){const[s,D]=l.exports.useState([]),[a,F]=l.exports.useState([]),[d,f]=l.exports.useState([]),[c,x]=l.exports.useState([]),[E,M]=l.exports.useState(1),[b,P]=l.exports.useState(!1),{id:g}=$(),R=j();l.exports.useEffect(()=>{g&&F(()=>Q(g))},[]),l.exports.useEffect(()=>{var t;D(a.data),a.data&&a.data.length>0?f(Object.keys((t=a==null?void 0:a.data)==null?void 0:t[0])||[]):f([])},[a]),l.exports.useEffect(()=>{d&&x(d.map(t=>({column:t,visible:!0})))},[d]);const y=t=>{x(c.map(r=>({...r,visible:r.column==t?!r.visible:r.visible})))},u=t=>{R({title:`${t} Export started.`,description:"The export process has been started. The file will be available in a moment.",status:"success",duration:1e4,position:"top-right",variant:"left-accent",isClosable:!0})},B=(s==null?void 0:s.length)>0;return n(o,{mt:5,height:"200vh",children:[e(O,{children:a.name}),e(V,{size:"xs",color:"gray.500",mt:3,children:a.description}),n(o,{bgColor:"gray.50",padding:5,children:[n(q,{defaultIndex:[0],allowMultiple:!0,children:[n(C,{children:[e("h2",{children:e(S,{children:e(o,{flex:"1",textAlign:"left",fontWeight:500,children:"Required filters"})})}),e(T,{children:a.requiredFilters&&a.requiredFilters.map(t=>{const r=t.replace("_"," ").toUpperCase();return n(z,{isRequired:!0,children:[e(H,{children:r}),e(L,{placeholder:r,backgroundColor:"white"})]},t)})})]}),n(C,{children:[e("h2",{children:n(S,{children:[e(o,{flex:"1",textAlign:"left",fontWeight:500,children:"Aditional filters"}),e(U,{})]})}),e(T,{children:new Array(E).fill("").map((t,r)=>e(W,{columns:["",...d],onAddClick:()=>M(i=>i+1)},r))})]})]}),e(o,{textAlign:"right",mt:5,children:e(k,{leftIcon:e(_,{}),colorScheme:"blue",onClick:()=>P(!0),children:"Show Preview"})})]}),b&&n(o,{mt:5,children:[n(I,{closeOnSelect:!1,children:[e(v,{as:k,colorScheme:"orange",variant:"outline",leftIcon:e(N,{}),children:"Configure columns"}),e(w,{children:d.map((t,r)=>{var i;return n(h,{onClick:()=>y(t),children:[e(G,{mr:2,isChecked:(i=c==null?void 0:c.find(p=>p.column==t))==null?void 0:i.visible}),t.toUpperCase()]},r)})})]}),n(I,{children:[e(v,{as:J,colorScheme:"orange",icon:e(K,{}),ml:2,children:"Export"}),n(w,{children:[e(h,{onClick:()=>u("Excel"),children:"Excel (.xlsx)"}),e(h,{onClick:()=>u("CSV"),children:"CSV"}),e(h,{onClick:()=>u("PDF"),children:"PDF"})]})]})]}),b&&e(o,{mt:10,border:"1px",borderRadius:10,borderColor:"gray",padding:2,children:e(X,{children:n(Y,{variant:"striped",colorScheme:"facebook",size:"sm",children:[e(Z,{children:e(m,{children:c.filter(t=>t.visible).map((t,r)=>e(ee,{children:t.column},`${t.column}-${r}`))})}),n(te,{children:[!B&&e(m,{children:e(A,{textAlign:"center",children:"No records found"})}),s==null?void 0:s.map((t,r)=>e(m,{children:c.filter(i=>i.visible).map((i,p)=>e(A,{children:re(t[i.column])},`${i.column}-${t.id}-${p}`))},t.id||r))]})]})})})]})}export{le as default};
